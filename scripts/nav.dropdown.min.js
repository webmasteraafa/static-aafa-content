$(document).ready(function(){window.Modernizr&&(Modernizr.touch&&!0,Modernizr.csstransitions&&!0);var t="navdd",s=function(t,s){return this.init.apply(this,arguments),this};return s.prototype={init:function(t,e){return this.element=$(t),this.options=$.extend({},s.defaults,e||{}),this.toggle=$(this.options.toggleSelector),this.isEnabled=!1,this.isShown=!1,this.isTransitioning=!1,this._titles=[],this._subs=[],this._states=[],this.length=0,this.scale=0,this.state=null,this._currStateIndex=-1,this.setBinds(),this},setBinds:function(){for(var t,s=["onTouch","onBodyTouch","onResize","onToggleTouch","onTitleTouch","onTransitionEnd"],e=0,i=s.length;e<i;e++)this[t=s[e]]=$.proxy(this[t],this);return this},ensureTitle:function(s,e){var i=this.options,n=e.data("navddTitle");return n||(n=$(i.titleFactory.call(this,s,e)),firstback=n.first(),firstback.on("click."+t,this.onTitleTouch),n.data({isTitle:!0,parentNavItem:s}),e.prepend(n),e.data("navddTitle",n),this._subs.push(e),this._titles.push(n)),this},go:function(s,e){var i,n,o,h=this._currStateIndex,a=[].slice.call(this._states),l=this.options;if(s>0){i=a[n=h+s],o=$(l.subNavSelector,i);for(var r=h+1,c=n;r<c+1;r++)$(a[r]).addClass(l.currentParentClass),this.ensureTitle($(a[r]),o)}else if(s<0){i=a[n=h+s],o=$(l.subNavSelector,i);for(r=h,c=n;r>c;r--)$(a[r]).removeClass(l.currentParentClass)}return this.onResize(),this.element.css({left:-this.scale*(n+1)+"px",height:""}),this.state=i||null,this._currStateIndex=n,e||this.element.trigger(t+".statechange"),this},push:function(t){var s=[].slice.call(this._states),e=this._currStateIndex;return e!==s.length-1&&s.splice(e+1,s.length-e),s.push(t),this._states=s,this.length=s.length,this.state=t,this},back:function(){return this.go(-1),this},forward:function(){return this.go(1),this},show:function(){if(this.isEnabled&&!this.isShown){var s=this.options;this.element.trigger(t+".showing"),this.toggle.addClass(s.toggleActiveClass),this.element.addClass(s.activeClass),$(document.body).on("click."+t,this.onBodyTouch),this.onResize(),this.element.trigger(t+".shown"),this.isShown=!0}return this},hide:function(){if(this.isEnabled&&this.isShown){var s=this.options;this.element.trigger(t+".hiding"),this.toggle.removeClass(s.toggleActiveClass),this.element.removeClass(s.activeClass),$(document.body).off("click."+t,this.onBodyTouch),this.element.trigger(t+".hidden"),this.isShown=!1}return this},enable:function(){if(!this.isEnabled){var s=this.options;this.element.trigger(t+".enabling"),this.element.on("click."+t,s.navItemTag,this.onTouch),$(window).on("resize."+t,this.onResize).trigger("resize."+t),$(window).on("orientationchange."+t,this.onResize).trigger("resize."+t),this.toggle.on("click."+t,this.onToggleTouch),$(s.navItemTag,this.element).each(function(t,e){$(s.subNavSelector,e).length&&$(e).addClass(s.withSubClass)}),this.isEnabled=!0,this.element.trigger(t+".enabled")}return this},disable:function(){if(this.isEnabled){var s=this.options;this.element.trigger(t+".disabling"),this.element.off("click."+t,s.navItemTag,this.onTouch),$(window).off("resize."+t,this.onResize),$(window).off("orientationchange."+t,this.onResize),this.toggle.off("click",this.onToggleTouch),$(document.body).off("click."+t,this.onBodyTouch),this.cleanup(),this._titles=[],this._subs=[],this._states=[],this.length=0,this.scale=0,this.state=null,this._currStateIndex=-1,this.isShown=!1,this.isTransitioning=!1,this.isEnabled=!1,this.element.trigger(t+".disabled")}return this},cleanup:function(){for(var t,s=this.options,e=this._subs,i=0,n=e.length;i<n;i++)(t=e[i]).css({width:"",left:""}),t.data("navddTitle").remove(),t.removeData("navddTitle");$("."+s.withSubClass,this.element).removeClass(s.withSubClass),$("."+s.currentParentClass,this.element).removeClass(s.currentParentClass),this._parents=[],this._subs=[];var o=this.element;return o.css({width:"",height:"",left:""}),o.removeClass(s.transitionClass),o.removeClass(s.activeClass),this.toggle.removeClass(s.toggleActiveClass),this},onTouch:function(t){var s=this.options,e=$(t.currentTarget);t.stopPropagation(),e.find(s.subNavSelector).length&&(t.preventDefault(),this.push(t.currentTarget),this.go(1))},onBodyTouch:function(t){this.options.closeOnBodyTouch&&t.target&&t.target!==this.toggle.get(0)&&t.target!==this.element.get(0)&&!$.contains(this.element[0],t.target)&&this.hide()},onTitleTouch:function(t){t.preventDefault(),t.stopPropagation(),this.back()},onToggleTouch:function(t){t.preventDefault(),this[this.isShown?"hide":"show"]()},onResize:function(){for(var t=this._subs,s=this.options,e=this.scale=$(window).width()||s.defaultScale,i=0,n=t.length;i<n;i++)t[i].css({left:e,width:e});this.element.removeClass(s.transitionClass).css("left",-e*(this._currStateIndex+1)+"px")},onTransitionEnd:function(){this.element.removeClass(this.options.transitionClass),this.isTransitioning=!1}},s.defaults={navItemTag:"li",subNavSelector:"> ul",toggleSelector:".navdd-toggle",titleTextSelector:"> a",autoNavigateTo:".active",activeClass:"active",currentParentClass:"current",withSubClass:"with-sub",toggleActiveClass:"active",titleClass:"name",transitionClass:"is-transitioning",closeOnBodyTouch:!1,defaultScale:320,titleFactory:function(t,s){return"<li class='"+this.options.titleClass+"'><a><span>Back</span></a></li> <li><a href="+$(this.options.titleTextSelector,t).attr("href")+">"+$(this.options.titleTextSelector,t).html()+"</a></li>"}},$.fn.navDropdown=function(t){return this.each(function(){var e=new s(this,t);$(this).data("navDropdown",e)})},s});
                